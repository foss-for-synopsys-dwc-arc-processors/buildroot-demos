From be020e4ce222300f07a309b6b26edfbf697bbf3b Mon Sep 17 00:00:00 2001
From: Eugeniy Paltsev <Eugeniy.Paltsev@synopsys.com>
Date: Mon, 2 Apr 2018 16:15:06 +0300
Subject: [PATCH v100500 8/9] ARC: undo the clearing of __GFP_ZERO in
 dma_alloc_attrs

Signed-off-by: Eugeniy Paltsev <Eugeniy.Paltsev@synopsys.com>
---
 arch/arc/mm/dma.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/arc/mm/dma.c b/arch/arc/mm/dma.c
index 1dcc404b5aec..c92e518413aa 100644
--- a/arch/arc/mm/dma.c
+++ b/arch/arc/mm/dma.c
@@ -30,7 +30,7 @@ static void *arc_dma_alloc(struct device *dev, size_t size,
 	void *kvaddr;
 	int need_coh = 1, need_kvaddr = 0;
 
-	page = alloc_pages(gfp, order);
+	page = alloc_pages(gfp | __GFP_ZERO, order);
 	if (!page)
 		return NULL;
 
-- 
2.14.3

